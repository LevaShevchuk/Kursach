<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/css/style.css" type="text/css">
    <link rel="shortcut icon" href="../../assets/images/favicon.png" type="image/png">
    <title>Классы</title>
</head>
<body>
    <div class="basis">
        <header>
            <nav>
                <input type="checkbox" id="checkbox-menu">
                <label for="checkbox-menu">
                    <div class='close' id='closer'></div>
                    <ul class="navigation touch">
                        <li><a href="../main/main.html">Главная</a></li>
                        <li><a href="../preparing/contents.html">Подготовка к работе с C#</a></li>
                        <li class="active"><a href="contents.html">Основы работы в C#</a></li>
                        <li><a href="../practical/contents.html">Практические задания</a></li>
                        <li><a href="../reference/contents.html">Справочные материалы</a></li>
                    </ul>
                </label>
            </nav> 
        </header>
        <div class="back">
            <a class="goback" href="#"><img src="../../assets/images/back.png" alt="back"></a>
        </div>
        <div class="center">
            <div class="main-page">
                <h2 class="title">Классы</h2>
                <p class="descrip"><span class="highlight">C#</span> является <span class="highlight">объектно-ориентированным</span> языком. Это значит, что программу на <span class="highlight">C#</span> можно представить в виде взаимосвязанных и взаимодействующих между собой <span class="highlight">объектов</span>.</p>
                <p class="descrip">Описанием <span class="highlight">объекта</span> является <span class="highlight">класс</span>, а <span class="highlight">объект</span> представляет <span class="highlight">экземпляр</span> этого <span class="highlight">класса</span>. Можно провести следующую аналогию. У каждого из нас есть некоторое представление о человеке, у которого есть имя, возраст, какие-то другие характеристики. То есть некоторый шаблон. Этот шаблон можно назвать <span class="highlight">классом</span>. Конкретное воплощение этого шаблона может отличаться, например, одни люди имеют одно имя, другие - другое имя. И реально существующий человек (фактически <span class="highlight">экземпляр</span> данного <span class="highlight">класса</span>) будет представлять собой <span class="highlight">объект</span> этого <span class="highlight">класса</span>.</p>
                <p class="descrip">По умолчанию проект консольного приложения уже содержит один <span class="highlight">класс - класс Program</span>, с которого и начинается выполнение программы.</p>
                <p class="descrip"><span class="highlight">Класс</span> представляет собой новый тип, который определяется пользователем. <span class="highlight">Класс</span> определяется с помощью ключевого слова <span class="highlight">class</span>:</p>
                <pre class="example-code"><code><span class="keywords">class</span> Person<br>{<br><br>}</code></pre>
                <p class="descrip">Где определяется <span class="highlight">класс</span>? <span class="highlight">Класс</span> можно определять внутри пространства имён, вне пространства имён, внутри другого <span class="highlight">класса</span>. Как правило, <span class="highlight">классы</span> помещаются в отдельные файлы. Но в данном случае <span class="highlight">новый класс</span> будет помещён в файле, где располагается <span class="highlight">класс Program</span>. Файл <span class="highlight">Program.cs</span> будет выглядеть следующим образом:</p>
                <pre class="example-code"><code><span class="keywords">using</span> System;<br><br><span class="keywords">namespace</span> HelloApp<br>{<br>   <span class="keywords">class</span> Person<br>   {<br><br>   }<br>   <span class="keywords">class</span> Program<br>   {<br>      <span class="keywords">static void</span> Main(<span class="keywords">string</span>[] args)<br>      {<br><br>      }<br>   }<br>}</code></pre>
                <p class="descrip">Вся функциональность <span class="highlight">класса</span> представлена его <span class="highlight">членами - полями</span> (<span class="highlight">полями</span> называются <span class="highlight">переменные класса</span>), свойствами, методами, событиями. Далее в <span class="highlight">классе Person</span> были определены поля и метод:</p>
                <pre class="example-code"><code><span class="keywords">using</span> System;<br><br><span class="keywords">namespace</span> HelloApp<br>{<br>   <span class="keywords">class</span> Person<br>   {<br>      <span class="keywords">public string</span> name;  <span class="comments">// имя</span><br>      <span class="keywords">public int</span> age = 20;  <span class="comments">// возраст</span><br><br>      <span class="keywords">public void</span> GetInfo()<br>      {<br>          <span class="keywords-light">Console</span>.WriteLine(<span class="string-code">$"Имя:</span> {name}  <span class="string-code">Возраст:</span> {age}<span class="string-code">"</span>);<br>      }<br>   }<br>   <span class="keywords">class</span> Program<br>   {<br>      <span class="keywords">static void</span> Main(<span class="keywords">string</span>[] args)<br>      {<br>         Person lev;<br>      }<br>   }<br>}</code></pre>
                <p class="descrip">В данном случае <span class="highlight">класс Person</span> представляет собой человека. Поле <span class="highlight">name</span> хранит <span class="highlight">имя</span>, а поле <span class="highlight">age - возраст человека</span>. А метод <span class="highlight">GetInfo</span> выводит все данные на консоль. Для того, чтобы все данные были доступны вне <span class="highlight">класса Person</span>, переменные и метод определены с модификатором <span class="highlight">public</span>. Поскольку поля фактически те же переменные, им можно присвоить начальные значения, как в случае выше, поле <span class="highlight">age</span> инициализировано значением 20.</p>
                <p class="descrip">Так как <span class="highlight">класс</span> представляет собой новый тип, то в программе можно определять переменные, которые представляют данный тип. Так, в методе <span class="highlight">Main</span> определена переменная <span class="highlight">lev</span>, которая представляет <span class="highlight">класс Person</span>. Но пока эта переменная не указывает ни на какой <span class="highlight">объект</span> и по умолчанию она имеет значение <span class="highlight">null</span>. Поэтому вначале необходимо создать <span class="highlight">объект класса Person</span>.</p>
                <p class="heading">Конструкторы</p>
                <p class="descrip">Кроме обычных методов в <span class="highlight">классах</span> используются также и специальные методы, которые называются <span class="highlight">конструкторами</span>. <span class="highlight">Конструкторы</span> вызываются при создании нового <span class="highlight">объекта</span> данного <span class="highlight">класса</span>. <span class="highlight">Конструкторы</span> выполняют инициализацию <span class="highlight">объекта</span>.</p>
                <p class="heading">Конструктор по умолчанию</p>
                <p class="descrip">Если в <span class="highlight">классе</span> не определено ни одного конструктора, то для этого <span class="highlight">класса</span> автоматически создается <span class="highlight">конструктор по умолчанию</span>. Такой <span class="highlight">конструктор</span> не имеет параметров и не имеет тела.</p>
                <p class="descrip">Выше <span class="highlight">класс Person</span> не имеет никаких конструкторов. Поэтому для него автоматически создаётся <span class="highlight">конструктор по умолчанию</span>, который можно использовать. Ниже был создан один <span class="highlight">объект класса Person:</span></p>
                <pre class="example-code"><code><span class="keywords">using</span> System;<br><br><span class="keywords">namespace</span> HelloApp<br>{<br>   <span class="keywords">class</span> Person<br>   {<br>      <span class="keywords">public string</span> name;  <span class="comments">// имя</span><br>      <span class="keywords">public int</span> age = 20;  <span class="comments">// возраст</span><br><br>      <span class="keywords">public void</span> GetInfo()<br>      {<br>          <span class="keywords-light">Console</span>.WriteLine(<span class="string-code">$"Имя:</span> {name}  <span class="string-code">Возраст:</span> {age}<span class="string-code">"</span>);<br>      }<br>   }<br><br>   <span class="keywords">class</span> Program<br>   {<br>      <span class="keywords">static void</span> Main(<span class="keywords">string</span>[] args)<br>      {<br>          Person lev = new <span class="keywords">Person</span>();<br>          lev.GetInfo();  <span class="comments">// Имя: Возраст: 0</span><br>          lev.name = <span class="string-code">"Лев"</span>;<br>          lev.age = 20;<br>          lev.GetInfo();   <span class="comments">// Имя: Лев Возраст: 20</span><br><br>          <span class="keywords-light">Console</span>.ReadKey();<br>      }<br>   }<br>}</code></pre>
                <p class="descrip"><span class="highlight">Консольный вывод:</span></p>
                <pre class="example-code console"><code>Имя:	Возраст: 0<br>Имя: Лев	Возраст: 20</code></pre>
                <p class="descrip">Для создания <span class="highlight">объекта Person</span> используется выражение <span class="highlight">new Person()</span>. Оператор <span class="highlight">new</span> выделяет память для <span class="highlight">объекта Person</span>. И затем вызывается <span class="highlight">конструктор по умолчанию</span>, который не принимает никаких параметров. В итоге после выполнения данного выражения в памяти будет выделен участок, где будут храниться все данные <span class="highlight">объекта Person</span>. А переменная <span class="highlight">lev</span> получит ссылку на созданный <span class="highlight">объект</span>.</p>
                <p class="descrip">Если <span class="highlight">конструктор</span> не инициализирует значения переменных <span class="highlight">объекта</span>, то они получают значения по умолчанию. Для переменных числовых типов это число 0, а для типа <span class="highlight">string</span> и <span class="highlight">классов</span> - это значение <span class="highlight">null</span> (отсутствие значения).</p>
                <p class="descrip">После создания <span class="highlight">объекта</span> можно обратиться к переменным <span class="highlight">объекта Person</span> через переменную <span class="highlight">lev</span> и установить или получить их значения, например, <span class="highlight">lev.name = "Лев";</span>.</p>
                <p class="heading">Создание конструкторов</p>
                <p class="descrip">Выше для инициализации <span class="highlight">объекта</span> использовался <span class="highlight">конструктор по умолчанию</span>. Однако можно самостоятельно определить <span class="highlight">конструкторы</span>:</p>
                <pre class="example-code"><code><span class="keywords">class</span> Person<br>{<br>   <span class="keywords">public string</span> name;<br>   <span class="keywords">public int</span> age;<br><br>   <span class="keywords">public</span> Person() { name = <span class="string-code">"Неизвестно"</span>; age = 18; }  <span class="comments">// 1-ый конструктор</span><br><br>   <span class="keywords">public</span> Person(<span class="keywords">string</span> n) { name = n; age = 18; }   <span class="comments">// 2-ой конструктор</span><br><br>   <span class="keywords">public</span> Person(<span class="keywords">string</span> n, <span class="keywords">int</span> a) { name = n; age = a; }   <span class="comments">// 3-ий конструктор</span><br><br>   <span class="keywords">public void</span> GetInfo()<br>   {<br>      <span class="keywords-light">Console</span>.WriteLine(<span class="string-code">$"Имя:</span> {name}  <span class="string-code">Возраст:</span> {age}<span class="string-code">"</span>);<br>   }<br>}</code></pre>
                <p class="descrip">Теперь в <span class="highlight">классе</span> определено три <span class="highlight">конструктора</span>, каждый из которых принимает различное количество параметров и устанавливает значения <span class="highlight">полей класса</span>. В следующем примере будут использоваться ранее созданные конструкторы:</p>
                <pre class="example-code"><code><span class="keywords">class</span> Person<br>{<br>   <span class="keywords">public string</span> name;<br>   <span class="keywords">public int</span> age;<br><br>   <span class="keywords">public</span> Person() { name = <span class="string-code">"Неизвестно"</span>; age = 18; }  <span class="comments">// 1-ый конструктор</span><br><br>   <span class="keywords">public</span> Person(<span class="keywords">string</span> n) { name = n; age = 18; }   <span class="comments">// 2-ой конструктор</span><br><br>   <span class="keywords">public</span> Person(<span class="keywords">string</span> n, <span class="keywords">int</span> a) { name = n; age = a; }   <span class="comments">// 3-ий конструктор</span><br><br>   <span class="keywords">public void</span> GetInfo()<br>   {<br>      <span class="keywords-light">Console</span>.WriteLine(<span class="string-code">$"Имя:</span> {name}  <span class="string-code">Возраст:</span> {age}<span class="string-code">"</span>);<br>   }<br>}<br><br><span class="keywords">static void</span> Main(<span class="keywords">string</span>[] args)<br>{<br>   Person lev = <span class="keywords">new</span> Person();   <span class="comments">// вызов 1-ого конструктора без параметров</span><br>   Person vasya = <span class="keywords">new</span> Person(<span class="string-code">"Вася"</span>);   <span class="comments">// вызов 2-ого конструктора с одним параметром</span><br>   Person petya = <span class="keywords">new</span> Person(<span class="string-code">"Петя"</span>, 19);   <span class="comments">// вызов 3-его конструктора с двумя параметрами</span><br><br>   lev.GetInfo();<br>   vasya.GetInfo();<br>   petya.GetInfo();<br>}</code></pre>
                <p class="descrip"><span class="highlight">Консольный вывод:</span></p>
                <pre class="example-code console"><code>Имя: Неизвестно  Возраст: 18<br>Имя: Вася  Возраст: 18<br>Имя: Петя  Возраст: 25</code></pre>
                <p class="descrip">При этом если в <span class="highlight">классе</span> определены конструкторы, то при создании <span class="highlight">объекта</span> необходимо использовать один из этих конструкторов.</p>
                <p class="descrip">Стоит отметить, что начиная с версии <span class="highlight">C# 9.0</span> появилась возможность сократить вызов конструктора, убрав из него название типа:</p>
                <pre class="example-code"><code>Person tom = <span class="keywords">new</span> ();   <span class="comments">// аналогично new Person();</span><br>Person vasya = <span class="keywords">new</span> (<span class="string-code">"Вася"</span>);   <span class="comments">// аналогично new Person("Вася");</span><br>Person petya = <span class="keywords">new</span> (<span class="string-code">"Петя"</span>, 19);   <span class="comments">// аналогично new Person("Петя", 19)</span></code></pre>
                <p class="heading">Ключевое слово this</p>
                <p class="descrip">Ключевое слово <span class="highlight">this</span> представляет собой ссылку на текущий <span class="highlight">экземпляр класса</span>. В каких ситуациях оно может пригодиться? В примере выше определены три конструктора. Все три конструктора выполняют однотипные действия - устанавливают значения полей <span class="highlight">name</span> и <span class="highlight">age</span>. Но этих повторяющихся действий могло быть больше. Поэтому можно не дублировать функциональность конструкторов, а просто обращаться из одного конструктора к другому через ключевое слово <span class="highlight">this</span>, передавая нужные значения для параметров:</p>
                <pre class="example-code"><code><span class="keywords">class</span> Person<br>{<br>   <span class="keywords">public string</span> name;<br><br>   <span class="keywords">public int</span> age;<br><br>   <span class="keywords">public</span> Person() : <span class="keywords">this</span>(<span class="string-code">"Неизвестно"</span>)<br>   {<br><br>   }<br><br>   <span class="keywords">public</span> Person(<span class="keywords">string</span> name) : <span class="keywords">this</span>(name, 20)<br>   {<br><br>   }<br><br>   <span class="keywords">public</span> Person(<span class="keywords">string</span> name, <span class="keywords">int</span> age)<br>   {<br>      <span class="keywords">this</span>.name = name;<br>      <span class="keywords">this</span>.age = age;<br>   }<br><br>   <span class="keywords">public void</span> GetInfo()<br>   {<br>      <span class="keywords-light">Console</span>.WriteLine(<span class="string-code">$"Имя:</span> {name}  <span class="string-code">Возраст:</span> {age}<span class="string-code">"</span>);<br>   }<br>}</code></pre>
                <p class="descrip">В данном случае первый конструктор вызывает второй, а второй конструктор вызывает третий. По количеству и типу параметров компилятор узнает, какой именно конструктор вызывается. Например, во втором конструкторе:</p>
                <pre class="example-code"><code><span class="keywords">public</span> Person(<span class="keywords">string</span> name) : <span class="keywords">this</span>(name, 18)<br>{<br><br>}</code></pre>
                <p class="descrip">Идёт обращение к третьему конструктору, которому передаются два значения. Причём в начале будет выполняться именно третий конструктор, и только потом код второго конструктора.</p>
                <p class="descrip">Также стоит отметить, что в третьем конструкторе параметры называются также, как и поля <span class="highlight">класса</span>.</p>
                <pre class="example-code"><code><span class="keywords">public</span> Person(<span class="keywords">string</span> name, <span class="keywords">int</span> age)<br>{<br>   <span class="keywords">this</span>.name = name;<br>   <span class="keywords">this</span>.age = age;<br>}</code></pre>
                <p class="descrip">Для того, чтобы разграничить параметры и поля <span class="highlight">класса</span>, к полям <span class="highlight">класса</span> идёт обращение через ключевое слово <span class="highlight">this</span> Так, в выражении <span class="highlight">this.name = name;</span> первая часть - <span class="highlight">this.name</span> - означает, что <span class="highlight">name</span> - это поле текущего <span class="highlight">класса</span>, а не название параметра <span class="highlight">name</span>. Если бы параметры и поля назывались по-разному, то использовать слово <span class="highlight">this</span> было бы необязательно. Также через ключевое слово <span class="highlight">this</span> можно обращаться к любому полю или методу.</p>
                <p class="heading">Инициализаторы объектов</p>
                <p class="descrip">Для инициализации <span class="highlight">объектов классов</span> можно применять <span class="highlight">инициализаторы</span>. <span class="highlight">Инициализаторы</span> представляют собой передачу в фигурных скобках значений доступным полям и свойствам <span class="highlight">объекта</span>:</p>
                <pre class="example-code"><code>Person tom = <span class="keywords">new</span> Person { name = <span class="string-code">"Лев"</span>, age = 20 };<br>lev.GetInfo();   <span class="comments">// Имя: Лев  Возраст: 20</span></code></pre>
                <p class="descrip">С помощью <span class="highlight">инициализатора объектов</span> можно присваивать значения всем доступным полям и свойствам <span class="highlight">объекта</span> в момент создания без явного вызова конструктора.</p>
                <p class="descrip">При использовании <span class="highlight">инициализаторов</span> следует учитывать следующие моменты:</p>
                <ul>
                    <li class="descrip-li">С помощью <span class="highlight">инициализатора</span> можно установить значения только доступных из внешнего кода полей и свойств <span class="highlight">объекта</span>. Например, в примере выше поля <span class="highlight">name</span> и <span class="highlight">age</span> имеют модификатор доступа <span class="highlight">public</span>, поэтому они доступны из любой части программы;</li>
                    <li class="descrip-li"><span class="highlight">Инициализатор</span> выполняется после <span class="highlight">конструктора</span>, поэтому если и <span class="highlight">в конструкторе</span>, и <span class="highlight">в инициализаторе</span> устанавливаются значения одних и тех же полей и свойств, то значения, устанавливаемые <span class="highlight">в конструкторе</span>, заменяются значениями <span class="highlight">из инициализатора</span>.</li>
                </ul>
            </div>
        </div>
        <a class="toTop" onclick="return up()"><img src="../../assets/images/top.png" alt="top"></a>
        <footer>
            <p><b>Разработчик:</b> Студент группы ПИ-21СВ Шевчук Лев Викторович<br>
                <b>Образовательная программа:</b> 09.03.04 Программная инженерия<br>
                НИУ ВШЭ-Пермь</p>
        </footer>		
    </div>
<script src="../../assets/js/script.js"></script>
</body>
</html>